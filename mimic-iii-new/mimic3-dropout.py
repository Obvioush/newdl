import matplotlib.pyplot as plt
import numpy as np
from scipy.interpolate import make_interp_spline


if __name__ == '__main__':

    # plt.rcParams['font.sans-serif'] = ['SimHei']  # 如果要显示中文字体,则在此处设为：SimHei
    # plt.rcParams['axes.unicode_minus'] = False  # 显示负号

    x = np.array([i for i in range(1, 51)])
    x1 = np.array([i for i in range(0, 51, 10)])
    mimic3_dropout0 = np.array([0.17052811307799678, 0.18904418560321323, 0.21339935901792634, 0.23538664891453295, 0.24595538541574305, 0.2518441127073463, 0.25563050231744294, 0.2630038233378649, 0.26425386839719717, 0.26912671772702496, 0.2742727535694422, 0.28049339320023203, 0.2835996089377363, 0.28617718537689085, 0.29255679766280795, 0.2974343304841834, 0.30135829463232183, 0.3007224969297197, 0.3061174782412035, 0.3134860251343312, 0.31124403980404536, 0.3088612060321905, 0.31665790263764737, 0.3191807823492337, 0.31714749670013925, 0.3134202523986017, 0.32092921533469526, 0.32266693963121373, 0.3208332186174422, 0.3231875345548781, 0.3204356930599083, 0.3201615820555593, 0.31994521073781873, 0.32191193917339667, 0.32409844638312413, 0.32224741300717646, 0.3210092413459559, 0.32008769625324646, 0.32291835738218505, 0.3188310152782823, 0.3160742644795578, 0.3190056199470587, 0.3179399612598851, 0.318216472830473, 0.3181775370853954, 0.3157934048330513, 0.31684602013320345, 0.3171535165258649, 0.31862142586189623, 0.316828767472627])
    mimic3_dropout02 = np.array([0.16286444921429435, 0.17678658523323823, 0.19853659449138933, 0.21838500954950468, 0.2309506288840971, 0.2393742131762955, 0.2430586140438339, 0.24702499018099183, 0.25098047046318084, 0.25032796935511636, 0.25515080766436676, 0.26034452141101905, 0.262640759003881, 0.2655480356617684, 0.26898791208246364, 0.26871059340488423, 0.2702790659214467, 0.2753038032344031, 0.2751361244856187, 0.2764219028925867, 0.2770017457387326, 0.27717827772274667, 0.27918531611949166, 0.2789982078865981, 0.2805691228357173, 0.28143517992086925, 0.28409556518980994, 0.28137294190333256, 0.2830032624229885, 0.2855199571048424, 0.28487602930167644, 0.28539965299796866, 0.2850243450369821, 0.28571746470311365, 0.2861442636635405, 0.28884905036249103, 0.28405428053340986, 0.28552488718934727, 0.2875895708797377, 0.2876673015743921, 0.28919666269237015, 0.28955575427476465, 0.2889511529058746, 0.2880402707032148, 0.2893016588594988, 0.288660473426032, 0.2900293453838321, 0.29022577629031954, 0.28900074575987444, 0.2882830123130359])
    mimic3_dropout04 = np.array([0.15874765015389572, 0.1694758039185706, 0.18470721883451408, 0.19798084547949307, 0.2126516281418948, 0.2245984890839543, 0.23196360169107946, 0.23650819616149107, 0.2395277046287324, 0.24414450393435977, 0.24791473795756447, 0.24590409747155895, 0.2513079682556513, 0.25214386597935945, 0.2526306594930059, 0.2585996301150287, 0.2620258479214493, 0.27281432336842704, 0.27957871100658177, 0.2838110606207377, 0.29454980673482417, 0.29033229998592375, 0.30153162102526726, 0.31012939699798303, 0.3072967610352185, 0.31460526347693446, 0.3180323389526119, 0.31806038708172596, 0.3193112349484766, 0.320990693830055, 0.3244067259331102, 0.3254911227094991, 0.3246766602395313, 0.32719354733651496, 0.32416093703969745, 0.3251295017374454, 0.32834616160507485, 0.3282496798912727, 0.32663062695942346, 0.3303935111434207, 0.32732317303130815, 0.3299861031453391, 0.3302908236689544, 0.33013083672596705, 0.32958416710433935, 0.3310824554026456, 0.32897127844403123, 0.33003457242271844, 0.32942131448977974, 0.3330990857814062])
    mimic3_dropout06 = np.array([0.1614410646702923, 0.16794963544502844, 0.18061939850709874, 0.19745384514972064, 0.22882825357319053, 0.27021548149043356, 0.27837396904290895, 0.29445191590313446, 0.29610264814627674, 0.3007001514332444, 0.30248283029241674, 0.3079492693126161, 0.3093485559950592, 0.31425006250280363, 0.3104738342310103, 0.31603193341086616, 0.3147363983440729, 0.310462994976369, 0.31996135247131824, 0.3202425443581869, 0.3171732632163275, 0.3198666472218204, 0.3225678033989652, 0.32334405175002023, 0.3203147002713662, 0.32269836341943425, 0.325625032478163, 0.32771018504717453, 0.32174188648784957, 0.32468844903221916, 0.3250804680159843, 0.32386863509579766, 0.32589944044505226, 0.3237469615997279, 0.32623576408238275, 0.3245927645718977, 0.3246812637576468, 0.32469855357773325, 0.32861200862942846, 0.3265213103948374, 0.32507030570215195, 0.3249237401468867, 0.3246449379665311, 0.32273771494975156, 0.3272330584604231, 0.32818269973169106, 0.32480333078522466, 0.3282774770882967, 0.3312899892585692, 0.32986681306481125])
    mimic3_dropout08 = np.array([0.16754119245811339, 0.2082568871556993, 0.2375371410175694, 0.26880700230989785, 0.2754390706560753, 0.28587454982142807, 0.28856978583976195, 0.2952678944005076, 0.2974322591913876, 0.30510362006647274, 0.3071451332133908, 0.30854600737599336, 0.3093353815388255, 0.30873009477012653, 0.3093023148098987, 0.3146502801708119, 0.31151966230257, 0.31366354384852124, 0.3163164264138859, 0.3217698804368694, 0.3190193825619273, 0.31925009303335466, 0.3192829818756304, 0.31927459261584434, 0.32013473653987407, 0.32167829718480034, 0.32312928024147003, 0.3239591296789984, 0.3222201374811941, 0.31995298352625023, 0.3214975582670582, 0.32496299530584993, 0.3235788061511141, 0.3255505504231894, 0.3206069287117745, 0.3229574189693878, 0.3242876142898493, 0.32469325196197085, 0.3271791925543631, 0.32138203979983176, 0.32395663599885766, 0.3224118508056314, 0.32458066837947785, 0.32487970714880526, 0.3248933702898985, 0.32251513591889064, 0.32516199416968117, 0.3238547785562152, 0.3233509610066068, 0.32189228367160855])

    x_smooth = np.linspace(x.min(), x.max(), 300)
    y3_1 = make_interp_spline(x, mimic3_dropout0)(x_smooth)
    y3_2 = make_interp_spline(x, mimic3_dropout02)(x_smooth)
    y3_3 = make_interp_spline(x, mimic3_dropout04)(x_smooth)
    y3_4 = make_interp_spline(x, mimic3_dropout06)(x_smooth)
    y3_5 = make_interp_spline(x, mimic3_dropout08)(x_smooth)

    # label在图示(legend)中显示。若为数学公式,则最好在字符串前后添加"$"符号
    # color：b:blue、g:green、r:red、c:cyan、m:magenta、y:yellow、k:black、w:white、、、
    # 线型：-  --   -.  :    ,
    # marker：.  ,   o   v    <    *    +    1

    plt.figure(figsize=(10, 5), dpi=600)
    plt.grid(linestyle="--")  # 设置背景网格线为虚线
    # ax = plt.gca()
    # ax.spines['top'].set_visible(False)  # 去掉上边框
    # ax.spines['right'].set_visible(False)  # 去掉右边框
    plt.plot(x_smooth, y3_1, color="darkorange", label="dropout=0", linewidth=1.5)
    plt.plot(x_smooth, y3_2, color="forestgreen", label="dropout=0.2", linewidth=1.5)
    plt.plot(x_smooth, y3_3, color="tab:blue", label="dropout=0.4", linewidth=1.5)
    plt.plot(x_smooth, y3_4, color="firebrick", label="dropout=0.6", linewidth=1.5)
    plt.plot(x_smooth, y3_5, color="tab:grey", label="dropout=0.8", linewidth=1.5)


    group_labels = ['0', '10', '20', '30', '40', ' 50']  # x轴刻度的标识
    plt.xticks(x1, group_labels, fontsize=12, fontweight='bold')  # 默认字体大小为10
    plt.yticks(fontsize=12, fontweight='bold')
    plt.xlabel("Iterations", fontsize=13, fontweight='bold')
    plt.ylabel("Recall@5", fontsize=13, fontweight='bold')
    plt.xlim(0, 51)  # 设置x轴的范围
    plt.ylim(0.15, 0.35)

    # plt.legend()          #显示各曲线的图例
    plt.legend(loc=0, numpoints=1)
    leg = plt.gca().get_legend()
    ltext = leg.get_texts()
    plt.setp(ltext, fontsize=12, fontweight='bold')  # 设置图例字体的大小和粗细


    # plt.savefig('./mimic3-dropout.svg', format='svg')  # 建议保存为svg格式,再用在线转换工具转为矢量图emf后插入word中
    plt.show()
