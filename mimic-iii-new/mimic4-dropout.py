import matplotlib.pyplot as plt
import numpy as np
from scipy.interpolate import make_interp_spline


if __name__ == '__main__':

    # plt.rcParams['font.sans-serif'] = ['SimHei']  # 如果要显示中文字体,则在此处设为：SimHei
    # plt.rcParams['axes.unicode_minus'] = False  # 显示负号

    x = np.array([i for i in range(1, 51)])
    x1 = np.array([i for i in range(0, 51, 10)])

    mimic4_dropout0 = np.array([0.22603584470824695, 0.28219689116795793, 0.3227883041110027, 0.33668049592174043, 0.34811168740650056, 0.35581952264586997, 0.35609247019348284, 0.3666223115216178, 0.37014964753331847, 0.37575417169292896, 0.3727393839800179, 0.38072200510799903, 0.38254253244275344, 0.3818515026589695, 0.3811561096177138, 0.3841227228915349, 0.38988605114800096, 0.3891381454359175, 0.3840163376489387, 0.3823631764174916, 0.39429779056562564, 0.3947853831143721, 0.382501989931114, 0.3908270755729371, 0.3953651593079312, 0.387786680106689, 0.3924687899084737, 0.3920827450408044, 0.3943756885604318, 0.384837361430966, 0.3843434205339078, 0.3926073068021464, 0.390828177726254, 0.3932751321498182, 0.39057056811095986, 0.3951529766079356, 0.3897823754311641, 0.39031377806041656, 0.3877396551842792, 0.3903711409499163, 0.3893627978473892, 0.38173120597688054, 0.387614949439632, 0.38412950447376315, 0.3877612268715749, 0.3803690014620479, 0.38359997649574645, 0.38582571357171724, 0.38043282333058803, 0.38212023312702964])
    mimic4_dropout02 = np.array([0.2108352385949268, 0.24390729380340512, 0.26931998400968654, 0.30003254513646044, 0.3323669193927922, 0.3492606201977744, 0.35955194982635275, 0.36185421135055, 0.3618405373498038, 0.3709622046469107, 0.3699677929630166, 0.3756786027400406, 0.38008484621401567, 0.38329916219631943, 0.3870253763093988, 0.38260832046785437, 0.3906670144184989, 0.3876409324561205, 0.3891449241920271, 0.38848145487209973, 0.3944254023290369, 0.39142367628651675, 0.3882388668497858, 0.390784163470642, 0.3930158247204077, 0.38925717696561396, 0.39283181304858755, 0.39097901788658435, 0.39610321844624785, 0.3990690065136995, 0.39440822460721886, 0.3960710664021779, 0.3963851425968267, 0.39576326498790076, 0.3921742607303041, 0.396536486277305, 0.3973591959489026, 0.3981389057347004, 0.39646688827247034, 0.3987482558093966, 0.3975731869233379, 0.3972687794800577, 0.3960350024487844, 0.39678951580660415, 0.3913679278102529, 0.3997993371731794, 0.39738533873338266, 0.39691159272853976, 0.399135897244259, 0.39979797707079545])
    mimic4_dropout04 = np.array([0.20534208027854478, 0.22963365837355246, 0.25093446428260224, 0.2803403384318059, 0.3235454652533532, 0.34144153553618845, 0.35009904332318703, 0.3564041331253414, 0.36012946954559644, 0.3685946118788582, 0.37248386811904993, 0.37639974297603457, 0.3748561448715158, 0.38024263696637495, 0.3838002575777102, 0.38427480482331944, 0.38121734275275854, 0.389624829501178, 0.3899070040746874, 0.3867508905008631, 0.3919607375648693, 0.38700160982421966, 0.39293383182480124, 0.3909466058314722, 0.3932872539328728, 0.3887085464153331, 0.3950622546909321, 0.3948002551841215, 0.3961331098581089, 0.39237029253857386, 0.39329836180818734, 0.39614544514982153, 0.39247924549149776, 0.3932760467495815, 0.39420946862887923, 0.39712509192042045, 0.4003951668728404, 0.40129818239843895, 0.39130303342660133, 0.4002961195874534, 0.3955184759726453, 0.39653774968325595, 0.40097177789115324, 0.397404554756316, 0.39634794309119425, 0.4005996466056878, 0.398237493710398, 0.39656874400693803, 0.39858539102948415, 0.3997168695267189])
    mimic4_dropout06 = np.array([0.2025613037391252, 0.24457807525217398, 0.30648915588471665, 0.3268776596660555, 0.3394154468631753, 0.3479311436705673, 0.35207916642979054, 0.35999859169312176, 0.36518403175632386, 0.37447048957882817, 0.3738765148435892, 0.37372537473034984, 0.3800057891643359, 0.385153346266141, 0.37885534673192794, 0.3815782864848437, 0.38132210913242753, 0.3868475399593553, 0.3899909383884445, 0.38879471626866513, 0.3884629096446801, 0.3903996528077065, 0.39326292119542344, 0.38965199422377367, 0.3938779000655433, 0.39182109148438715, 0.39254328358774854, 0.39561574688021456, 0.3925469647793817, 0.3979833626067942, 0.39476113074306507, 0.3974291950327991, 0.39830956010254287, 0.3977742435044725, 0.3966855872248252, 0.39653696913777625, 0.39671643208464374, 0.3964385255655926, 0.39726616496376466, 0.39722657139463396, 0.3974704555316803, 0.39837611612403034, 0.3929087169892069, 0.39419793885811877, 0.401477334176784, 0.3956899901712652, 0.3974015606110688, 0.3964118588860752, 0.3954397834042736, 0.3999276785145655])
    mimic4_dropout08 = np.array([0.22536919790254073, 0.2870344498336406, 0.3156725566212721, 0.33238010172771415, 0.3428813295231154, 0.3521871046512096, 0.3561323219314277, 0.36752303643456624, 0.3671098518991409, 0.37293939456818176, 0.3771066701283889, 0.3801146358440326, 0.3760690788864762, 0.38419847228050663, 0.3875580246684685, 0.38676500292093696, 0.3878846705677795, 0.3891185222897085, 0.3876092082906246, 0.3932355691504361, 0.3910825898165667, 0.3932316757422663, 0.3975370925523023, 0.3962144708969293, 0.3936895067540875, 0.39690530985552086, 0.39361725950437565, 0.3900765373573028, 0.39669700618820364, 0.3947819227426463, 0.3973276804781566, 0.3927869580246489, 0.3999011759385851, 0.40053957355888065, 0.39721210716929156, 0.39826598101243854, 0.398757736130544, 0.3963745492104351, 0.39587855325814647, 0.39819473229044094, 0.396746974089397, 0.4004292086526564, 0.3969780949322487, 0.40062640347045025, 0.39811332368616625, 0.4015439564014284, 0.3996738165759679, 0.3986136103516535, 0.4006729003553398, 0.3995829899627054])

    x_smooth = np.linspace(x.min(), x.max(), 300)

    y4_1 = make_interp_spline(x, mimic4_dropout0)(x_smooth)
    y4_2 = make_interp_spline(x, mimic4_dropout02)(x_smooth)
    y4_3 = make_interp_spline(x, mimic4_dropout04)(x_smooth)
    y4_4 = make_interp_spline(x, mimic4_dropout06)(x_smooth)
    y4_5 = make_interp_spline(x, mimic4_dropout08)(x_smooth)

    # label在图示(legend)中显示。若为数学公式,则最好在字符串前后添加"$"符号
    # color：b:blue、g:green、r:red、c:cyan、m:magenta、y:yellow、k:black、w:white、、、
    # 线型：-  --   -.  :    ,
    # marker：.  ,   o   v    <    *    +    1
    plt.figure(figsize=(10, 5), dpi=600)
    plt.grid(linestyle="--")  # 设置背景网格线为虚线

    plt.plot(x_smooth, y4_1, color="darkorange", label="dropout=0", linewidth=1.5)
    plt.plot(x_smooth, y4_2, color="forestgreen", label="dropout=0.2", linewidth=1.5)
    plt.plot(x_smooth, y4_3, color="tab:blue", label="dropout=0.4", linewidth=1.5)
    plt.plot(x_smooth, y4_4, color="firebrick", label="dropout=0.6", linewidth=1.5)
    plt.plot(x_smooth, y4_5, color="tab:grey", label="dropout=0.8", linewidth=1.5)

    group_labels = ['0', '10', '20', '30', '40', '50']  # x轴刻度的标识
    plt.xticks(x1, group_labels, fontsize=12, fontweight='bold')  # 默认字体大小为10
    plt.yticks(fontsize=12, fontweight='bold')
    plt.xlabel("Iterations", fontsize=13, fontweight='bold')
    plt.ylabel("Recall@5", fontsize=13, fontweight='bold')
    plt.xlim(0, 51)  # 设置x轴的范围
    plt.ylim(0.3, 0.42)

    # plt.legend()          #显示各曲线的图例
    plt.legend(loc=0, numpoints=1)
    leg = plt.gca().get_legend()
    ltext = leg.get_texts()
    plt.setp(ltext, fontsize=12, fontweight='bold')  # 设置图例字体的大小和粗细

    plt.savefig('./mimic4-dropout.svg', format='svg')  # 建议保存为svg格式,再用在线转换工具转为矢量图emf后插入word中
    plt.show()
